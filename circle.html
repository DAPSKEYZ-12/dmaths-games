<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Circle Theorem Challenge: Geometry Quest</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); color: #333; min-height: 100vh; padding: 20px; }
        .container { max-width: 1300px; margin: 0 auto; background-color: rgba(255, 255, 255, 0.97); border-radius: 20px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4); overflow: hidden; }
        header { background: linear-gradient(to right, #203a43, #2c5364); color: white; padding: 25px; text-align: center; }
        .game-container { display: flex; flex-wrap: wrap; padding: 20px; gap: 20px; }
        .left-panel, .right-panel { flex: 1; min-width: 350px; background-color: #f8f9fa; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); }
        .panel-title { font-size: 1.5rem; color: #2c5364; margin-bottom: 20px; border-bottom: 2px solid #eaeaea; display: flex; align-items: center; gap: 10px; }
        .circle-container { background-color: white; border-radius: 10px; padding: 20px; text-align: center; border: 2px solid #2c5364; margin-bottom: 20px; }
        canvas { max-width: 100%; height: auto; }
        .theorem-selector { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 15px; }
        .theorem-btn { padding: 10px; background-color: #e9ecef; border: 2px solid #adb5bd; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9rem; transition: 0.3s; text-align: center; }
        .theorem-btn.active { background-color: #2c5364; color: white; border-color: #203a43; }
        .btn { padding: 12px 20px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn-primary { background-color: #2c5364; color: white; }
        .btn-secondary { background-color: #f8f9fa; border: 2px solid #2c5364; }
        .stats { display: flex; justify-content: space-around; background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .stat-box { text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: bold; color: #2c5364; }
        .feedback { padding: 15px; border-radius: 10px; margin-top: 15px; text-align: center; font-weight: bold; display: none; }
        .feedback.correct { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .feedback.incorrect { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .quiz-option { padding: 12px; background: white; border: 2px solid #dee2e6; border-radius: 8px; cursor: pointer; margin-bottom: 10px; transition: 0.2s; }
        .quiz-option:hover { border-color: #2c5364; }
        .quiz-option.selected { background-color: #d1ecf1; border-color: #17a2b8; }
        .progress-bar { height: 15px; background: #e9ecef; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress { height: 100%; background: #28a745; width: 0%; transition: 0.5s; }
        .history-item { padding: 8px; background: white; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-circle"></i> Circle Theorem Challenge</h1>
            <div id="masteryText">Level 1: Novice | Theorems Mastered: 0/8</div>
            <div class="progress-bar"><div class="progress" id="progress"></div></div>
        </header>

        <div class="game-container">
            <div class="left-panel">
                <h2 class="panel-title"><i class="fas fa-drafting-compass"></i> Interactive Circle</h2>
                <div class="stats">
                    <div class="stat-box"><div class="stat-value" id="score">0</div><div class="stat-label">Score</div></div>
                    <div class="stat-box"><div class="stat-value" id="streak">0</div><div class="stat-label">Streak</div></div>
                </div>
                
                <div class="circle-container">
                    <canvas id="circleCanvas" width="400" height="400"></canvas>
                </div>

                <div class="theorem-selector">
                    <button class="theorem-btn active" data-theorem="angle-center">Central Angle</button>
                    <button class="theorem-btn" data-theorem="angle-circumference">Same Segment</button>
                    <button class="theorem-btn" data-theorem="cyclic-quadrilateral">Cyclic Quad</button>
                    <button class="theorem-btn" data-theorem="tangent-radius">Tangent/Radius</button>
                    <button class="theorem-btn" data-theorem="alternate-segment">Alt. Segment</button>
                    <button class="theorem-btn" data-theorem="chord-bisector">Chord Bisector</button>
                    <button class="theorem-btn" data-theorem="angle-semicircle">Semicircle</button>
                    <button class="theorem-btn" data-theorem="intersecting-chords">Intersecting Chords</button>
                </div>

                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="btn btn-primary" id="quizBtn"><i class="fas fa-question"></i> Take Quiz</button>
                    <button class="btn btn-secondary" id="resetBtn">Reset</button>
                </div>
                <div class="feedback" id="feedback"></div>
            </div>

            <div class="right-panel">
                <div id="infoSection">
                    <h2 class="panel-title" id="theoremName">Central Angle Theorem</h2>
                    <p id="theoremDesc" style="margin-bottom: 15px;">The angle subtended at the center is twice the angle at the circumference.</p>
                    <div id="theoremFormula" style="font-family: monospace; background: #eee; padding: 10px; border-radius: 5px; margin-bottom: 15px;">∠AOB = 2 × ∠ACB</div>
                </div>

                <div id="quizSection" style="display: none;">
                    <h2 class="panel-title">Question</h2>
                    <p id="quizQuestion" style="margin-bottom: 20px; font-weight: bold;"></p>
                    <div id="quizOptions"></div>
                    <button class="btn btn-primary" id="submitBtn" style="margin-top: 15px; width: 100%;">Submit Answer</button>
                </div>

                <h2 class="panel-title" style="margin-top: 30px;"><i class="fas fa-history"></i> History</h2>
                <div id="historyLog"></div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('circleCanvas');
        const ctx = canvas.getContext('2d');
        const centerX = 200, centerY = 200, radius = 150;

        let state = {
            score: 0, streak: 0, 
            currentTheorem: 'angle-center',
            mastered: new Set(),
            selectedOption: null
        };

        const theorems = {
            "angle-center": {
                name: "Central Angle Theorem",
                desc: "The angle subtended at the center is twice the angle at the circumference.",
                formula: "∠Center = 2 × ∠Circumference",
                quiz: { q: "If the angle at the circumference is 45°, what is the angle at the center?", options: ["22.5°", "45°", "90°", "180°"], correct: 2 }
            },
            "angle-circumference": {
                name: "Angles in Same Segment",
                desc: "Angles subtended by the same arc at the circumference are equal.",
                formula: "∠ACB = ∠ADB",
                quiz: { q: "Two angles are subtended by the same arc. If one is 30°, the other is...", options: ["15°", "30°", "60°", "90°"], correct: 1 }
            },
            "cyclic-quadrilateral": {
                name: "Cyclic Quadrilateral",
                desc: "Opposite angles of a cyclic quadrilateral sum to 180°.",
                formula: "∠A + ∠C = 180°",
                quiz: { q: "If one angle of a cyclic quadrilateral is 80°, what is the opposite angle?", options: ["10°", "80°", "100°", "180°"], correct: 2 }
            },
            "tangent-radius": {
                name: "Tangent-Radius Theorem",
                desc: "A tangent is perpendicular (90°) to the radius at the point of contact.",
                formula: "Radius ⟂ Tangent",
                quiz: { q: "What is the angle between a radius and a tangent at the contact point?", options: ["0°", "45°", "90°", "180°"], correct: 2 }
            },
            "angle-semicircle": {
                name: "Angle in a Semicircle",
                desc: "The angle subtended by a diameter at the circumference is always 90°.",
                formula: "∠Semicircle = 90°",
                quiz: { q: "An angle is drawn from the ends of the diameter to the edge. Its size is...", options: ["45°", "90°", "180°", "Variable"], correct: 1 }
            },
            "alternate-segment": {
                name: "Alternate Segment Theorem",
                desc: "The angle between a tangent and a chord equals the angle in the alternate segment.",
                formula: "∠Tangent-Chord = ∠AltSegment",
                quiz: { q: "If the angle between tangent and chord is 55°, the alternate segment angle is...", options: ["35°", "55°", "110°", "125°"], correct: 1 }
            },
            "chord-bisector": {
                name: "Chord Bisector Theorem",
                desc: "A line from the center perpendicular to a chord bisects (splits) the chord.",
                formula: "Perpendicular = Bisector",
                quiz: { q: "A radius cuts a 10cm chord at 90°. How long is each chord segment?", options: ["2.5cm", "5cm", "10cm", "20cm"], correct: 1 }
            },
            "intersecting-chords": {
                name: "Intersecting Chords",
                desc: "The products of the segments of two intersecting chords are equal.",
                formula: "a × b = c × d",
                quiz: { q: "Chord segments are 2 and 6. Another chord has a segment of 3. What is its other segment?", options: ["1", "4", "9", "12"], correct: 1 }
            }
        };

        function drawBase() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.strokeStyle = '#2c5364';
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(centerX, centerY, 5, 0, Math.PI * 2);
            ctx.fillStyle = '#2c5364';
            ctx.fill();
        }

        function drawTheorem() {
            drawBase();
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#e67e22';
            ctx.fillStyle = '#e67e22';

            const p1 = { x: centerX + radius * Math.cos(0.5), y: centerY + radius * Math.sin(0.5) };
            const p2 = { x: centerX + radius * Math.cos(2.5), y: centerY + radius * Math.sin(2.5) };
            const top = { x: centerX + radius * Math.cos(-1.5), y: centerY + radius * Math.sin(-1.5) };

            switch(state.currentTheorem) {
                case 'angle-center':
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(centerX, centerY); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(top.x, top.y); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                    break;
                case 'angle-circumference':
                    const top2 = { x: centerX + radius * Math.cos(-0.5), y: centerY + radius * Math.sin(-0.5) };
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(top.x, top.y); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(top2.x, top2.y); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                    break;
                case 'cyclic-quadrilateral':
                    const p4 = { x: centerX + radius * Math.cos(4), y: centerY + radius * Math.sin(4) };
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(top.x, top.y); ctx.lineTo(p2.x, p2.y); ctx.lineTo(p4.x, p4.y); ctx.closePath(); ctx.stroke();
                    break;
                case 'tangent-radius':
                    ctx.beginPath(); ctx.moveTo(centerX, centerY); ctx.lineTo(p1.x, p1.y); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(p1.x - 50, p1.y + 20); ctx.lineTo(p1.x + 50, p1.y - 20); ctx.stroke();
                    break;
                case 'angle-semicircle':
                    const opp = { x: centerX + radius * Math.cos(0.5 + Math.PI), y: centerY + radius * Math.sin(0.5 + Math.PI) };
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(opp.x, opp.y); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(top.x, top.y); ctx.lineTo(opp.x, opp.y); ctx.stroke();
                    break;
                case 'alternate-segment':
                    ctx.beginPath(); ctx.moveTo(p1.x - 60, p1.y + 30); ctx.lineTo(p1.x + 60, p1.y - 30); ctx.stroke(); // tangent
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(p2.x, p2.y); ctx.lineTo(top.x, top.y); ctx.closePath(); ctx.stroke();
                    break;
                case 'chord-bisector':
                    ctx.beginPath(); ctx.moveTo(p1.x, p1.y); ctx.lineTo(p2.x, p2.y); ctx.stroke();
                    ctx.beginPath(); ctx.setLineDash([5, 5]); ctx.moveTo(centerX, centerY); ctx.lineTo((p1.x+p2.x)/2, (p1.y+p2.y)/2); ctx.stroke(); ctx.setLineDash([]);
                    break;
                case 'intersecting-chords':
                    const c1 = { x: centerX + radius * Math.cos(0.2), y: centerY + radius * Math.sin(0.2) };
                    const c2 = { x: centerX + radius * Math.cos(3.5), y: centerY + radius * Math.sin(3.5) };
                    const d1 = { x: centerX + radius * Math.cos(1.5), y: centerY + radius * Math.sin(1.5) };
                    const d2 = { x: centerX + radius * Math.cos(5.5), y: centerY + radius * Math.sin(5.5) };
                    ctx.beginPath(); ctx.moveTo(c1.x, c1.y); ctx.lineTo(c2.x, c2.y); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(d1.x, d1.y); ctx.lineTo(d2.x, d2.y); ctx.stroke();
                    break;
            }
        }

        function setupQuiz() {
            const quiz = theorems[state.currentTheorem].quiz;
            document.getElementById('infoSection').style.display = 'none';
            document.getElementById('quizSection').style.display = 'block';
            document.getElementById('quizQuestion').innerText = quiz.q;
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            quiz.options.forEach((opt, i) => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.innerText = opt;
                btn.onclick = () => {
                    document.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
                    btn.classList.add('selected');
                    state.selectedOption = i;
                };
                optionsDiv.appendChild(btn);
            });
        }

        document.getElementById('submitBtn').onclick = () => {
            if (state.selectedOption === null) return;
            const quiz = theorems[state.currentTheorem].quiz;
            const feedback = document.getElementById('feedback');
            feedback.style.display = 'block';

            if (state.selectedOption === quiz.correct) {
                state.score += 10;
                state.streak++;
                state.mastered.add(state.currentTheorem);
                feedback.innerText = "Correct! +10 Points";
                feedback.className = "feedback correct";
                logHistory(`Solved ${theorems[state.currentTheorem].name}`, true);
            } else {
                state.streak = 0;
                feedback.innerText = "Incorrect. Try again!";
                feedback.className = "feedback incorrect";
                logHistory(`Failed ${theorems[state.currentTheorem].name}`, false);
            }
            updateUI();
            setTimeout(() => {
                document.getElementById('quizSection').style.display = 'none';
                document.getElementById('infoSection').style.display = 'block';
                feedback.style.display = 'none';
                state.selectedOption = null;
            }, 2000);
        };

        function updateUI() {
            document.getElementById('score').innerText = state.score;
            document.getElementById('streak').innerText = state.streak;
            const progress = (state.mastered.size / 8) * 100;
            document.getElementById('progress').style.width = progress + "%";
            document.getElementById('masteryText').innerText = `Theorems Mastered: ${state.mastered.size}/8`;
        }

        function logHistory(msg, success) {
            const log = document.getElementById('historyLog');
            const item = document.createElement('div');
            item.className = 'history-item';
            item.innerHTML = `<span>${msg}</span> <i class="fas ${success ? 'fa-check-circle' : 'fa-times-circle'}" style="color:${success ? '#28a745' : '#dc3545'}"></i>`;
            log.prepend(item);
        }

        document.querySelectorAll('.theorem-btn').forEach(btn => {
            btn.onclick = () => {
                document.querySelectorAll('.theorem-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                state.currentTheorem = btn.dataset.theorem;
                document.getElementById('theoremName').innerText = theorems[state.currentTheorem].name;
                document.getElementById('theoremDesc').innerText = theorems[state.currentTheorem].desc;
                document.getElementById('theoremFormula').innerText = theorems[state.currentTheorem].formula;
                drawTheorem();
            };
        });

        document.getElementById('quizBtn').onclick = setupQuiz;
        document.getElementById('resetBtn').onclick = () => location.reload();

        drawTheorem();
    </script>
</body>
</html>
